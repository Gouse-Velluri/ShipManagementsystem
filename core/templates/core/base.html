{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}MarineOps{% endblock %} â€” Ship Maintenance</title>
  <link rel="stylesheet" href="{% static 'core/css/style.css' %}">
  {% block extra_css %}{% endblock %}
</head>
<body>

<div class="app-layout">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">
      <a href="/dashboard/" class="logo-mark">
        <div class="logo-icon">âš“</div>
        <div>
          <div class="logo-text">MarineOps</div>
          <div class="logo-sub">Ship Maintenance</div>
        </div>
      </a>
    </div>

    <nav class="nav">
      <div class="nav-section-label">Overview</div>
      <a href="/dashboard/" class="nav-item" data-href="/dashboard/">
        <span class="nav-icon">â—ˆ</span> Dashboard
      </a>

      <div class="nav-section-label">Fleet</div>
      <a href="/ships/" class="nav-item" data-href="/ships/">
        <span class="nav-icon">ğŸš¢</span> Ships
      </a>
      <a href="/components/" class="nav-item" data-href="/components/">
        <span class="nav-icon">âš™</span> Components
      </a>

      <div class="nav-section-label">Operations</div>
      <a href="/jobs/" class="nav-item" data-href="/jobs/">
        <span class="nav-icon">ğŸ”§</span> Maintenance Jobs
      </a>
      <a href="/calendar/" class="nav-item" data-href="/calendar/">
        <span class="nav-icon">ğŸ“…</span> Calendar
      </a>
    </nav>

    <div class="sidebar-footer">
      <div class="user-pill">
        <div class="user-avatar" id="sidebar-avatar">A</div>
        <div class="user-info">
          <div class="user-name" id="sidebar-name">Loadingâ€¦</div>
          <div class="user-role" id="sidebar-role">â€”</div>
        </div>
        <button class="logout-btn" title="Logout">â»</button>
      </div>
    </div>
  </aside>

  <!-- Mobile overlay -->
  <div class="mobile-overlay"></div>

  <!-- Main -->
  <div class="main-content">
    <header class="topbar">
      <div class="d-flex align-center gap-3">
        <button class="hamburger">â˜°</button>
        <span class="page-title">{% block page_title %}{% endblock %}</span>
      </div>
      <div class="topbar-right">
        <div class="notif-btn" title="Notifications">
          ğŸ””
          <span class="notif-badge" style="display:none">0</span>
        </div>
      </div>
    </header>

    <!-- Notification panel -->
    <div class="notif-panel"></div>

    <main class="page-body">
      {% block content %}{% endblock %}
    </main>
  </div>
</div>

<!-- Toast container -->
<div class="toast-container"></div>

<script src="{% static 'core/js/app.js' %}"></script>
{% block extra_js %}{% endblock %}
<script>
  // Auth guard
  if (!Auth.currentUser()) window.location.href = '/';
  App.init();
</script>
</body>
</html>
